<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.exportexcel.export.exportMapper.PmTenantUserMapper">
    <select id="selectTaskList" resultType="java.util.Map">
        SELECT distinct task_time as taskTime,
        obj_name as objName
        FROM misp.pm_tenant_user
        WHERE
        task_time >= #{startTime}
        AND task_time &lt;= #{endTime}
        ORDER BY task_time
    </select>
    <select id="eqId" resultType="java.util.Map">
        SELECT EQUIPMENT_ID AS eqId,
        EQUIPMENT_NAME AS eqName
        FROM pm_equipment_info
        WHERE IS_DEL='N'
    </select>
    <select id="list" resultType="java.util.Map">
        SELECT
        tc.equipment_id as equimentId,
        pi.equipment_name as eqName,
        date_format(from_unixtime(tc.create_time / 1000), '%Y-%m-%d %H:%i:%s') AS timestamp,
        val as dotSum
        from mp_realtime_consum_data tc
        left join pm_equipment_info pi on tc.equipment_id = pi.equipment_id
        where tc.equipment_id = #{eqId}
        and tc.data_type=1
        and  create_time &gt;= #{startTime}
        and create_time &lt;= #{endTime}
    </select>
    <update id="updataValue" parameterType="java.util.Map">
		update pm_consumables_equipment
		<set>
		user_low_threshold = #{firstThreshold,jdbcType=BIGINT},
        user_high_threshold = #{secondThreshold,jdbcType=BIGINT},
        time_alar_threshold = #{finalThreshold,jdbcType=BIGINT}
        </set>
		where equipment_id = #{eqId,jdbcType=BIGINT}
		and cons_id = #{consId,jdbcType=BIGINT}
	</update>
</mapper>